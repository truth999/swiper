/*
 * Swiper 1.3 - Mobile Touch Slider
 * http://www.idangero.us/sliders/swiper/
 *
 * Copyright 2012, Vladimir Kharlampidi
 * The iDangero.us
 * http://www.idangero.us/
 *
 * Licensed under GPL & MIT
 *
 * Updated on: April 2, 2012
*/Swiper=function(a,b,c){function d(a){return document.querySelectorAll(a)}function q(){e.init(),e.swipeTo(e.activeSlide,0,!1)}function t(a){if(e.isTouched||b.onlyExternal)return!1;e.isTouched=!0;if(!e.isSupportTouch()||a.targetTouches.length==1){e.isSupportTouch()||a.preventDefault(),e.touches.startX=e.touches.currentX=e.isSupportTouch()?a.targetTouches[0].pageX:a.pageX,e.touches.startY=e.touches.currentY=e.isSupportTouch()?a.targetTouches[0].pageY:a.pageY,e.touches.start=e.touches.current=g?e.touches.startX:e.touches.startY,e.setTransition(0),e.positions.start=e.positions.current=g?e.getTranslate("x"):e.getTranslate("y"),g?e.setTransform(e.positions.start,0,0):e.setTransform(0,e.positions.start,0);var c=new Date;e.times.start=c.getTime(),l=undefined,b.onTouchStart&&b.onTouchStart(e)}}function u(a){if(!e.isTouched||b.onlyExternal)return;if(e.isSupportTouch()){typeof l=="undefined"&&g&&(l=!!(l||Math.abs(a.targetTouches[0].pageY-e.touches.startY)>Math.abs(a.targetTouches[0].pageX-e.touches.startX))),typeof l=="undefined"&&!g&&(l=!!(l||Math.abs(a.targetTouches[0].pageY-e.touches.startY)<Math.abs(a.targetTouches[0].pageX-e.touches.startX)));if(l)return}b.autoPlay&&e.stopAutoPlay();if(!e.isSupportTouch()||a.touches.length==1){a.preventDefault(),b.onTouchMove&&b.onTouchMove(e),e.touches.current=g?e.isSupportTouch()?a.targetTouches[0].pageX:a.pageX:e.isSupportTouch()?a.targetTouches[0].pageY:a.pageY,e.positions.current=(e.touches.current-e.touches.start)*b.ratio+e.positions.start;if(e.positions.current>0&&(!b.freeMode||!!b.freeModeFluid)){var c=(h*2-e.positions.current)/h/2;c<.5?e.positions.current=h/2:e.positions.current=e.positions.current*c}if(Math.abs(e.positions.current)>j-h&&(!b.freeMode||!!b.freeModeFluid)){var c=(j-h+e.positions.current)/(j-h)/2,d=e.positions.current-h*c*(i-1),f=-(j-h/2);d<f?e.positions.current=f:e.positions.current=d}if(!b.followFinger)return;g?e.setTransform(e.positions.current,0,0):e.setTransform(0,e.positions.current,0),b.freeMode&&e.updateActiveSlide(e.positions.current)}}function v(a){if(b.onlyExternal||!e.isTouched)return;e.isTouched=!1,e.positions.current||(e.positions.current=e.positions.start),g?e.setTransform(e.positions.current,0,0):e.setTransform(0,e.positions.current,0);var c=new Date;e.times.end=c.getTime(),e.touches.diff=e.touches.current-e.touches.start,e.touches.abs=Math.abs(e.touches.diff),e.positions.diff=e.positions.current-e.positions.start,e.positions.abs=Math.abs(e.positions.diff);var d=e.positions.diff,f=e.positions.abs;f<5&&e.swipeReset();var i=j-h;if(e.positions.current>0){e.swipeReset(),b.onTouchEnd&&b.onTouchEnd(e);return}if(Math.abs(e.positions.current)>i){e.swipeReset(),b.onTouchEnd&&b.onTouchEnd(e);return}if(b.freeMode){if(e.times.end-e.times.start<300&&b.freeModeFluid){var l=e.positions.current+e.touches.diff*2;l<i*-1&&(l=-i),l>0&&(l=0),g?e.setTransform(l,0,0):e.setTransform(0,l,0),e.setTransition((e.times.end-e.times.start)*2),e.updateActiveSlide(l)}(!b.freeModeFluid||e.times.end-e.times.start>=300)&&e.updateActiveSlide(e.positions.current),b.onTouchEnd&&b.onTouchEnd(e);return}k=d<0?"toNext":"toPrev",k=="toNext"&&e.times.end-e.times.start<=300&&(f<30?e.swipeReset():e.swipeNext()),k=="toPrev"&&e.times.end-e.times.start<=300&&(f<30?e.swipeReset():e.swipePrev()),k=="toNext"&&e.times.end-e.times.start>300&&(f>=h*.5?e.swipeNext():e.swipeReset()),k=="toPrev"&&e.times.end-e.times.start>300&&(f>=h*.5?e.swipePrev():e.swipeReset()),b.onTouchEnd&&b.onTouchEnd(e)}function w(){b.onSlideChangeStart&&b.onSlideChangeStart(e),b.onSlideChangeEnd&&e.transitionEnd(b.onSlideChangeEnd)}if(!document.querySelectorAll||document.querySelectorAll(a).length==0)return;var e=this;e.touches={},e.positions={},e.times={},e.isTouched=!1,e.activeSlide=0,e.use3D=e.isSupport3D(),b=b||{},e.params=b,b.mode=b.mode||"horizontal",b.ratio=b.ratio||1,b.speed=b.speed||300,b.freeMode=b.freeMode||!1,b.freeModeFluid=b.freeModeFluid||!1,b.simulateTouch===!1?b.simulateTouch=!1:b.simulateTouch=!0,b.followFinger===!1?b.followFinger=!1:b.followFinger=!0,b.autoPlay=b.autoPlay||!1,b.onlyExternal=b.onlyExternal||!1,b.createPagination===!1?b.createPagination=!1:b.createPagination=!0,b.pagination=b.pagination||!1,b.slideClass=b.slideClass||"swiper-slide",b.wrapperClass=b.wrapperClass||"swiper-wrapper",b.paginationClass=b.paginationClass||"swiper-pagination-switch",b.paginationActiveClass=b.paginationActiveClass||"swiper-active-switch";var f=d(a+" ."+b.wrapperClass).item(0),g,h,i,j,k,l;e.wrapper=f,g=b.mode=="horizontal";var m={touchStart:e.isSupportTouch()||!b.simulateTouch?"touchstart":"mousedown",touchMove:e.isSupportTouch()||!b.simulateTouch?"touchmove":"mousemove",touchEnd:e.isSupportTouch()||!b.simulateTouch?"touchend":"mouseup"};e.init=function(){var c=d(a).item(0).offsetWidth,e=d(a).item(0).offsetHeight;h=g?c:e,i=d(a+" ."+b.slideClass).length;for(var k=0;k<i;k++)d(a+" ."+b.slideClass).item(k).style.width=c+"px",d(a+" ."+b.slideClass).item(k).style.height=e+"px";var l=i*c,m=i*e;j=g?l:m,g?f.style.width=l+"px":f.style.height=m+"px"},e.init();if(b.pagination&&b.createPagination){var n="";for(var o=0;o<i;o++){var p="";o==0&&(p=" "+b.paginationActiveClass),n+='<span class="'+b.paginationClass+""+p+'"></span>'}d(b.pagination)[0].innerHTML=n}window.addEventListener("resize",q,!1);var r;e.startAutoPlay=function(){b.autoPlay&&(r=setInterval(function(){var a=e.activeSlide+1;a==i&&(a=0),e.swipeTo(a)},b.autoPlay))},e.stopAutoPlay=function(){r&&clearInterval(r)},b.autoPlay&&e.startAutoPlay(),f.addEventListener(m.touchStart,t,!1);var s=e.isSupportTouch()?f:document;s.addEventListener(m.touchMove,u,!1),s.addEventListener(m.touchEnd,v,!1),e.destroy=function(a){a=a===!1?a:a||!0,a&&window.removeEventListener("resize",q,!1),f.removeEventListener(m.touchStart,t,!1),s.removeEventListener(m.touchMove,u,!1),s.removeEventListener(m.touchEnd,v,!1)},e.swipeNext=function(){e.positions.current||(e.positions.current=-h);var a=Math.ceil(-e.positions.current/h)*h;if(a==j)return!1;g?e.setTransform(-a,0,0):e.setTransform(0,-a,0),e.setTransition(b.speed),e.touches.start=e.touches.current,e.positions.current-=h,e.updateActiveSlide(-a),w()},e.swipePrev=function(){var a=g?e.getTranslate("x"):e.getTranslate("y");if(a==0)return!1;var c=(Math.ceil(-e.positions.current/h)-1)*h;c==-a&&(c-=h,e.positions.current=-c),g?e.setTransform(-c,0,0):e.setTransform(0,-c,0),e.setTransition(b.speed),e.updateActiveSlide(-c),w()},e.swipeReset=function(a){var c=e.positions.current<0?Math.round(e.positions.current/h)*h:0;c==-j&&(c+=h),b.mode=="horizontal"?e.setTransform(c,0,0):e.setTransform(0,c,0),e.setTransition(b.speed),e.updateActiveSlide(c),b.onSlideReset&&b.onSlideReset(e)},e.swipeTo=function(a,c,d){if(a<0||a>i-1)return!1;d=d===!1?!1:d||!0;var c=c===0?c:c||b.speed,f=-a*h;return e.setTransform(f,0,0),e.setTransition(c),e.updateActiveSlide(f),d&&w(),!0},e.updateActiveSlide=function(a){e.activeSlide=Math.round(-a/h),e.activeSlide==i&&(e.activeSlide=i-1),e.activeSlide<0&&(e.activeSlide=0),b.pagination&&e.updatePagination()},e.updatePagination=function(){var a=d(b.pagination+" ."+b.paginationActiveClass).item(0);if(!a)return;a.className.indexOf("active")>=0&&(a.className=a.className.replace(b.paginationActiveClass,"")),d(b.pagination+" ."+b.paginationClass).item(e.activeSlide).className=d(b.pagination+" ."+b.paginationClass).item(e.activeSlide).className+" "+b.paginationActiveClass}},Swiper.prototype={transitionEnd:function(a){var b=this,c=b.wrapper,d=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"];if(a){function e(){a(b);for(var f=0;f<d.length;f++)c.removeEventListener(d[f],e,!1)}for(var f=0;f<d.length;f++)c.addEventListener(d[f],e,!1)}},isSupportTouch:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},isSupport3D:function(){var a=document.createElement("div");a.id="test3d";var b=!1;"webkitPerspective"in a.style&&(b=!0),"MozPerspective"in a.style&&(b=!0),"OPerspective"in a.style&&(b=!0),"MsPerspective"in a.style&&(b=!0),"perspective"in a.style&&(b=!0);if(b&&"webkitPerspective"in a.style){var c=document.createElement("style");c.textContent="@media (-webkit-transform-3d), (transform-3d), (-moz-transform-3d), (-o-transform-3d), (-ms-transform-3d) {#test3d{height:5px}}",document.getElementsByTagName("head")[0].appendChild(c),document.body.appendChild(a),b=a.offsetHeight===5,c.parentNode.removeChild(c),a.parentNode.removeChild(a)}return b},getTranslate:function(a){var b=this.wrapper;if(window.WebKitCSSMatrix)var c=new WebKitCSSMatrix(window.getComputedStyle(b,null).webkitTransform);else var c=window.getComputedStyle(b,null).MozTransform||window.getComputedStyle(b,null).OTransform||window.getComputedStyle(b,null).MsTransform||window.getComputedStyle(b,null).msTransform||window.getComputedStyle(b,null).transform;if(a=="x")var d=parseInt(c.toString().split(",")[4],10);if(a=="y")var d=parseInt(c.toString().split(",")[5],10);return d},setTransform:function(a,b,c){var d=this.wrapper.style;a=a||0,b=b||0,c=c||0,this.use3D?d.webkitTransform=d.MsTransform=d.msTransform=d.MozTransform=d.OTransform=d.transform="translate3d("+a+"px, "+b+"px, "+c+"px)":d.webkitTransform=d.MsTransform=d.msTransform=d.MozTransform=d.OTransform=d.transform="translate("+a+"px, "+b+"px)"},setTransition:function(a){var b=this.wrapper.style;b.webkitTransitionDuration=b.MsTransitionDuration=b.msTransitionDuration=b.MozTransitionDuration=b.OTransitionDuration=b.transitionDuration=a/1e3+"s"}},(window.jQuery||window.Zepto)&&function(a){a.fn.swiper=function(b){return new Swiper(a(this).selector,b)}}(window.jQuery||window.Zepto);